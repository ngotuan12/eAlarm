{% extends "base.html" %} 
{% block content-header %}
{% include 'add-device-property.html' %}
{% include 'edit-device-property.html' %}
<div class="pageheader" style="min-height: 60px;padding: 10px;">
	<div class="col-sm-4">
		<select name='slType' class="form-control chosen-select" data-placeholder="Chọn tỉnh thành phố ..." style="display: none;" required="">
			<option value="-1"></option>
			{% if lsArea %}
				{% for area in lsArea %}
					<option value="{{ area.code }}">{{ area.name }}</option>
				{% endfor %}
			{% endif %}
		</select>
	</div>
	<div class="col-sm-4">
		<select name='slType' class="form-control chosen-select" data-placeholder="Chọn trạng thái ..." style="display: none;" required="">
			<option value="-1"></option>
			<option value="0">Mất kết nối</option>
			<option value="1">Tất cả</option>
			<option value="2">Cảnh báo</option>
		</select>
	</div>
</div>
{% endblock %}
{% block content %}
<div class="contentpanel" style="padding: 10px;">
	<div class="panel panel-default">
		<div class="panel-body" style="padding: 5px;">
			<div class="table-responsive">
				<div class="row">
					<div class="col-md-9">
						<div id="map-canvas" style="width: 100%;min-height: 500px;">
						</div>
					</div>
					<div class="col-md-3">
						<div class="col-sm">
							<ul class="nav nav-pills nav-stacked">
								{% if lsArea %}
									{% for area in lsArea %}
										<li area_id="{{ area.id }}" onclick="onActive('{{ area.id }}');">
										<a href="#"> <span class="badge pull-right" >2</span>{{ area.name }}</a>
										<ul class="folder-list" area_id="{{ area.id }}">
											{% if lsDevice %}
												{% for device in lsDevice %}
													{% if device.status == '2' %}
														<li device_id ="{{ device.id }}"><a href="#"><i
															class="fa fa-times-circle"></i>{{ device.code }}-{{ device.short_address }}</a></li>
													{% elif device.status == '0' %}
														<li><a href="#"><i
															class="fa fa-ban"></i>{{ device.code }}-{{ device.short_address }}</a></li>
													{% else %}
														<li><a href="#"><i
															class="fa fa-check-square"></i>{{ device.code }}-{{ device.short_address }}</a></li>
													{% endif %}
												{% endfor %}
											{% endif %}
										</ul>
								</li>
									{% endfor %}
								{% endif %}
							</ul>
						</div>
					</div>
				</div>
			</div>
			<!-- table-responsive -->

		</div>
		<!-- panel-body -->
	</div>
	<!-- panel -->
</div>
<!-- contentpanel -->
{% endblock %} 
{% block scripts %}
<script src="js/jquery-1.10.2.min.js"></script>
<script src="js/jquery-migrate-1.2.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/modernizr.min.js"></script>
<script src="js/jquery.sparkline.min.js"></script>
<script src="js/toggles.min.js"></script>
<script src="js/retina.min.js"></script>
<script src="js/jquery.cookies.js"></script>

<script src="js/jquery.datatables.min.js"></script>
<script src="js/chosen.jquery.min.js"></script>
<script src="js/jquery.numeric.js"></script>
<script src="js/custom.js"></script>
<script src="js/jquery.validate.min.js"></script>
<script src="js/chosen.jquery.min.js"></script>
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
	function initialize() {
		var styles =
			[
				{
					"featureType": "poi",
					//"elementType": "bus",
					"stylers": 
					[
						{ "visibility": "off" }
					]
				},
				{
					"featureType": "transit",
					//"elementType": "bus",
					"stylers": 
					[
						{ "visibility": "off" }
					]
				}
			];
		var myLatlng = new google.maps.LatLng(16.3333, 108.1200)
		var mapOptions = {
			center: myLatlng,
			zoom: 5,
		};
		var map = new google.maps.Map(document.getElementById("map-canvas"),mapOptions);
		map.setOptions({styles: styles});
		var marker = new google.maps.Marker({
			position: myLatlng,
			map: map,
			title: 'Việt Nam'
		});
	}
	google.maps.event.addDomListener(window, 'load', initialize);
</script>
<script>
	jQuery(document).ready(function() {
		// Chosen Select
		jQuery(".chosen-select").chosen({'width':'100%','white-space':'nowrap'});
		
		jQuery('#table2').dataTable({
			"sPaginationType" : "full_numbers"
		});
	});
	jQuery(window).load(function(){ 
		$(".numberic").numeric();
		$("ul.folder-list").hide();
		//alert($("ul li ul.folder-list li[device_id][device_id='4']").size());
	});
	function onActive(area_id)
	{
		if(!$("ul li[area_id][area_id='"+ area_id +"']").hasClass("active"))
		{
			$("ul li[area_id][area_id='"+ area_id +"']").addClass("active");
			$("ul[area_id][area_id='"+ area_id +"']").show();
		}
		else
		{
			$("ul li[area_id][area_id='"+ area_id +"']").removeClass("active");
			$("ul[area_id][area_id='"+ area_id +"']").hide();
		}
		$("ul li[area_id][area_id!='"+ area_id +"']").removeClass("active");
		$("ul[area_id][area_id!='"+ area_id +"']").hide();
	}
</script>
{% endblock scripts%}
